---
description: "React/Next.js clean-code"
globs: ["**/*.{ts,tsx,js,jsx}"]
alwaysApply: true
priority: 10
---
-

- Arch: Feature-based folders; components/ui/hooks/lib separation. Next.js: App Router; Server Components by default; Client Components only when needed.
- Types: TypeScript strict mode; no `any`; use interfaces for props; Zod for runtime validation. Props: explicit types; no inline objects for complex props.
- Components: Functional only; keep small (aim <=50 LOC); extract hooks/logic; single responsibility. Use composition over inheritance.

- Hooks: Custom hooks for reusable logic; `use*` prefix; extract complex useState/useEffect. Dependencies: exhaustive deps; cleanup in useEffect.
- State: Local state (useState) for UI; Context for theme/auth; Zustand/TanStack Query for global/server state. Avoid prop drilling.

- Styling: Tailwind CSS utility-first; extract repeated patterns to components; no inline styles; use CSS modules for complex animations.
- API: TanStack Query (React Query) for data fetching; SWR as fallback; typed API clients; error boundaries. Next.js: Server Actions for mutations.

- Performance: React.memo for expensive renders; useMemo/useCallback sparingly; code-split with dynamic imports; Image optimization (next/image).
- Errors: Error boundaries; try/catch in async; user-friendly messages; log to monitoring. Next.js: error.tsx for route-level errors.

- Tests: Vitest + React Testing Library; test behavior not implementation; AAA pattern; mock API calls. E2E: Playwright.

- AI: before edits write 3â€“5 line plan + component/state impact; changes atomic; no drive-by refactors.